<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.3.3.2. bam2starchcluster &mdash; BEDOPS 2.5.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="top" title="BEDOPS 2.5.0 documentation" href="../../../../index.html" />
    <link rel="up" title="6.3.3. Data conversion" href="../conversion.html" />
    <link rel="next" title="6.3.3.3. gff2bed" href="gff2bed.html" />
    <link rel="prev" title="6.3.3.1. bam2bed" href="bam2bed.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="gff2bed.html" title="6.3.3.3. gff2bed"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bam2bed.html" title="6.3.3.1. bam2bed"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../../index.html">BEDOPS 2.5.0 documentation</a> &raquo;</li>
          <li><a href="../../../reference.html" >6. Reference</a> &raquo;</li>
          <li><a href="../../file-management.html" >6.3. File management</a> &raquo;</li>
          <li><a href="../conversion.html" accesskey="U">6.3.3. Data conversion</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="bam2starchcluster">
<span id="id1"></span><h1>6.3.3.2. <cite>bam2starchcluster</cite><a class="headerlink" href="#bam2starchcluster" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">bam2starchcluster</span></tt> script uses a Sun Grid Engine (SGE) job scheduler to parallelize the work of <tt class="docutils literal"><span class="pre">bam2starch</span></tt>, which converts an <strong>indexed</strong>, 0-based, half-open <tt class="docutils literal"><span class="pre">[start-1,</span> <span class="pre">end)</span></tt> <a class="reference external" href="http://samtools.sourceforge.net/SAM1.pdf">Binary (Sequence) Alignment/Map</a> (BAM) file to a sorted, 0-based, half-open <tt class="docutils literal"><span class="pre">[start-1,</span> <span class="pre">end)</span></tt> UCSC BED dataset, and thence converts this to a <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive.</p>
<p>This script splits the indexed BAM file by chromosome name. Each chromosome of BAM records is converted to a <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive with <tt class="docutils literal"><span class="pre">bam2starch</span></tt>. Once all per-chromosome archives are made, they are collated into one final Starch archive with <a class="reference internal" href="../compression/starchcat.html#starchcat"><em>starchcat</em></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive can save a lot of space relative to the original BAM format, up to 33% of the original BAM dataset, while offering per-chromosome random access. Further, use of a computational grid practically reduces the total compression time to that of the largest chromosome (<em>e.g.</em>, <tt class="docutils literal"><span class="pre">chr1</span></tt> or similar), an order of magnitude reduction over <tt class="docutils literal"><span class="pre">bam2starch</span></tt> alone.</p>
</div>
<div class="section" id="dependencies">
<h2>6.3.3.2.1. Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>This <tt class="docutils literal"><span class="pre">python</span></tt> shell script is dependent upon the installation of <a class="reference external" href="http://samtools.sourceforge.net/">SAMtools</a> and Python, version 2.6.2 or greater (and less than Python3). It also requires a computational grid that is managed with Sun Grid Engine 6.1u5 (or higher).</p>
</div>
<div class="section" id="source">
<h2>6.3.3.2.2. Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">bam2starchcluster</span></tt> conversion script is part of the binary and source downloads of BEDOPS. See the <a class="reference internal" href="../../../installation.html#installation"><em>Installation</em></a> documentation for more details.</p>
</div>
<div class="section" id="usage">
<h2>6.3.3.2.3. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please review and edit the contents of this script before use with your data. Customization will be required to match your SGE installation and environment, as well as the nature of your BAM data.</p>
</div>
<p>At minimum, use of this script with your computational cluster will require editing of the <tt class="docutils literal"><span class="pre">queue</span></tt> parameter, and possibly adjustments to <tt class="docutils literal"><span class="pre">qsub</span></tt> options.</p>
<p>You will also need to make sure your BAM data are indexed. There should be a second BAI file with the same name as the BAM file you wish to compress, located in the same working directory.</p>
<p>Further, if your indexed BAM data contain custom tags, edit the <tt class="docutils literal"><span class="pre">bam2starch</span></tt> call within this script to append the <tt class="docutils literal"><span class="pre">--custom-tags</span> <span class="pre">&lt;value&gt;</span></tt> argument (see the <a class="reference internal" href="bam2bed.html#bam2bed"><em>bam2bed</em></a> documentation for more details). You may also wish to review other parameters available with the <tt class="docutils literal"><span class="pre">bam2starch</span></tt> script, applying them in this script as needed.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/logo_with_label_v2.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.3.3.2. <cite>bam2starchcluster</cite></a><ul>
<li><a class="reference internal" href="#dependencies">6.3.3.2.1. Dependencies</a></li>
<li><a class="reference internal" href="#source">6.3.3.2.2. Source</a></li>
<li><a class="reference internal" href="#usage">6.3.3.2.3. Usage</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="bam2bed.html"
                        title="previous chapter">6.3.3.1. <cite>bam2bed</cite></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gff2bed.html"
                        title="next chapter">6.3.3.3. <cite>gff2bed</cite></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/content/reference/file-management/conversion/bam2starchcluster.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="gff2bed.html" title="6.3.3.3. gff2bed"
             >next</a> |</li>
        <li class="right" >
          <a href="bam2bed.html" title="6.3.3.1. bam2bed"
             >previous</a> |</li>
        <li><a href="../../../../index.html">BEDOPS 2.5.0 documentation</a> &raquo;</li>
          <li><a href="../../../reference.html" >6. Reference</a> &raquo;</li>
          <li><a href="../../file-management.html" >6.3. File management</a> &raquo;</li>
          <li><a href="../conversion.html" >6.3.3. Data conversion</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Shane Neph, Alex Reynolds.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>