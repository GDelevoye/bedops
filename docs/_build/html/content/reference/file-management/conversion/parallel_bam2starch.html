<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.3.3.4. Parallel bam2starch &mdash; BEDOPS v2.4.4</title>
    
    <link rel="stylesheet" href="../../../../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.4.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="top" title="BEDOPS v2.4.4" href="../../../../index.html" />
    <link rel="up" title="6.3.3. Data conversion" href="../conversion.html" />
    <link rel="next" title="6.3.3.5. gff2bed" href="gff2bed.html" />
    <link rel="prev" title="6.3.3.3. Parallel bam2bed" href="parallel_bam2bed.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <body role="document">
    <header id="pageheader"><h1><a href="../../../../index.html ">
        BEDOPS v2.4.4
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="parallel_bam2bed.html" title="Previous document">6.3.3.3. Parallel <cite>bam2bed</cite></a>
        </li>
        <li>
          <a href="gff2bed.html" title="Next document">6.3.3.5. <cite>gff2bed</cite></a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../../../index.html">Home</a></li>
      <li>
        <a href="../../../reference.html">6. Reference</a>
      </li>
      <li>
        <a href="../../file-management.html">6.3. File management</a>
      </li>
      <li>
        <a href="../conversion.html">6.3.3. Data conversion</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="parallel-bam2starch">
<span id="id1"></span><h1>6.3.3.4. Parallel <cite>bam2starch</cite><a class="headerlink" href="#parallel-bam2starch" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">bam2starch_sge</span></code> and <code class="docutils literal"><span class="pre">bam2starch_gnuParallel</span></code> scripts use a Sun or Oracle Grid Engine (SGE/OGE) or <a class="reference external" href="https://en.wikipedia.org/wiki/GNU_parallel">GNU Parallel</a> job scheduler to parallelize the work of <code class="docutils literal"><span class="pre">bam2starch</span></code>, which converts an <strong>indexed</strong>, 0-based, half-open <code class="docutils literal"><span class="pre">[start-1,</span> <span class="pre">end)</span></code> <a class="reference external" href="http://samtools.sourceforge.net/SAM1.pdf">Binary (Sequence) Alignment/Map</a> (BAM) file to a sorted, 0-based, half-open <code class="docutils literal"><span class="pre">[start-1,</span> <span class="pre">end)</span></code> UCSC BED dataset, and thence converts this to a <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive.</p>
<p>This script splits the indexed BAM file by chromosome name. Each chromosome of BAM records is converted to a <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive with <code class="docutils literal"><span class="pre">bam2starch</span></code> (via <code class="docutils literal"><span class="pre">convert2bed</span></code>). Once all per-chromosome archives are made, they are collated into one final Starch archive with <a class="reference internal" href="../compression/starchcat.html#starchcat"><em>starchcat</em></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A <a class="reference internal" href="../compression/starch-specification.html#starch-specification"><em>Starch-formatted</em></a> archive can save a great deal of space relative to the original BAM format, up to 33% of the original BAM dataset, while offering per-chromosome random access. Further, use of a computational grid practically reduces the total compression time to that of the largest chromosome (<em>e.g.</em>, <code class="docutils literal"><span class="pre">chr1</span></code> or similar), an order of magnitude reduction over <code class="docutils literal"><span class="pre">bam2starch</span></code> alone.</p>
</div>
<div class="section" id="dependencies">
<h2>6.3.3.4.1. Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>This shell script is dependent upon a working computational grid that is managed with Sun Grid Engine 6.1u5 (or higher), or installation of GNU Parallel v20130922 or greater.</p>
</div>
<div class="section" id="source">
<h2>6.3.3.4.2. Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">bam2starch_sge</span></code> and <code class="docutils literal"><span class="pre">bam2starch_gnuParallel</span></code> conversion scripts are part of the binary and source downloads of BEDOPS. See the <a class="reference internal" href="../../../installation.html#installation"><em>Installation</em></a> documentation for more details.</p>
</div>
<div class="section" id="usage">
<h2>6.3.3.4.3. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please review and edit the contents of this script before use with your data. Customization may be required to match your SGE/OGE or GNU Parallel installation and environment, as well as the nature of your BAM data.</p>
</div>
<p>At minimum, use of this script with an SGE/OGE computational cluster will require editing of the <code class="docutils literal"><span class="pre">queue</span></code> parameter, possible adjustments to <code class="docutils literal"><span class="pre">qsub</span></code> options, and may require adjustments to paths to working BEDOPS binaries.</p>
<p>You will also need to make sure your BAM data are indexed. There must be a second BAI file with the same name as the BAM file you wish to compress, located in the same working directory. If this index file is not present, the script will exit early with an error.</p>
<p>You may also wish to review other parameters available with the <code class="docutils literal"><span class="pre">bam2starch</span></code> script, applying them in this script as needed (see the <a class="reference internal" href="bam2bed.html#bam2bed"><em>bam2bed</em></a> documentation for more details).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/logo_with_label_v3.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.3.3.4. Parallel <cite>bam2starch</cite></a><ul>
<li><a class="reference internal" href="#dependencies">6.3.3.4.1. Dependencies</a></li>
<li><a class="reference internal" href="#source">6.3.3.4.2. Source</a></li>
<li><a class="reference internal" href="#usage">6.3.3.4.3. Usage</a></li>
</ul>
</li>
</ul>

<div class="sourcelink">
  <a href="../../../../_sources/content/reference/file-management/conversion/parallel_bam2starch.txt" rel="nofollow">
    Show page source
  </a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="parallel_bam2bed.html" title="Previous document">6.3.3.3. Parallel <cite>bam2bed</cite></a>
        </li>
        <li>
          <a href="gff2bed.html" title="Next document">6.3.3.5. <cite>gff2bed</cite></a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../../../index.html">Home</a></li>
      <li>
        <a href="../../../reference.html">6. Reference</a>
      </li>
      <li>
        <a href="../../file-management.html">6.3. File management</a>
      </li>
      <li>
        <a href="../conversion.html">6.3.3. Data conversion</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2011-2015, Shane Neph, Alex Reynolds.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.3b2
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>