
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>6.3.2.1. starch &#8212; BEDOPS v2.4.36</title>
    <link rel="stylesheet" href="../../../../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="6.3.2.2. unstarch" href="unstarch.html" />
    <link rel="prev" title="6.3.2. Compression" href="../compression.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head><body>
    <header id="pageheader"><h1><a href="../../../../index.html ">
        BEDOPS v2.4.36
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="../compression.html" title="Previous document">6.3.2. Compression</a>
        </li>
        <li>
          <a href="unstarch.html" title="Next document">6.3.2.2. <cite>unstarch</cite></a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../../../index.html">Home</a></li>
      <li>
        <a href="../../../reference.html">6. Reference</a>
      </li>
      <li>
        <a href="../../file-management.html">6.3. File management</a>
      </li>
      <li>
        <a href="../compression.html">6.3.2. Compression</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="starch">
<span id="id1"></span><h1>6.3.2.1. <cite>starch</cite><a class="headerlink" href="#starch" title="Permalink to this headline">¶</a></h1>
<p>With high-throughput sequencing generating large amounts of genomic data, archiving can be a critical part of an analysis toolkit. BEDOPS includes the <code class="docutils literal notranslate"><span class="pre">starch</span></code> utility to provide a method for efficient and lossless compression of <a class="reference external" href="http://genome.ucsc.edu/FAQ/FAQformat.html#format1">UCSC BED-formatted data</a> into the <a class="reference internal" href="starch-specification.html#starch-specification"><span class="std std-ref">Starch v2 format</span></a>.</p>
<p>Starch v2 archives can be extracted with <a class="reference internal" href="unstarch.html#unstarch"><span class="std std-ref">unstarch</span></a> to recover the original BED input, or processed as inputs to <a class="reference internal" href="../../set-operations/bedops.html#bedops"><span class="std std-ref">bedops</span></a> and <a class="reference internal" href="../../statistics/bedmap.html#bedmap"><span class="std std-ref">bedmap</span></a>, where set operations and element calculations can be performed directly and without the need for intermediate file extraction.</p>
<p>The <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> utility includes <a class="reference external" href="http://en.wikipedia.org/wiki/Large_file_support">large file support</a> on 64-bit operating systems, enabling compression of more than 2 GB of data (a common restriction on 32-bit systems).</p>
<p>Data can be stored with one of two open-source backend compression methods, either <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> or <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, providing the end user with a reasonable tradeoff between speed and storage performance that can be useful for working with constrained storage situations or slower hardware.</p>
<div class="section" id="inputs-and-outputs">
<h2>6.3.2.1.1. Inputs and outputs<a class="headerlink" href="#inputs-and-outputs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="input">
<h3>6.3.2.1.1.1. Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<p>As with other BEDOPS utilities, <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> takes in <a class="reference internal" href="../sorting/sort-bed.html#sort-bed"><span class="std std-ref">sorted</span></a> BED data as input. You can use <a class="reference internal" href="../sorting/sort-bed.html#sort-bed"><span class="std std-ref">sort-bed</span></a> to sort BED data, piping it into <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> as standard input (see <a class="reference internal" href="#starch-example"><span class="std std-ref">Example</span></a> section below).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While more than three columns may be specified, most of the space savings in the Starch format are derived from from a pre-processing step on the coordinates. Therefore, minimizing or removing unnecessary columnar data from the fourth column on (<em>e.g.</em>, with <code class="docutils literal notranslate"><span class="pre">cut</span> <span class="pre">-f1-3</span></code> or similar) can help improve compression efficiency considerably.</p>
</div>
</div>
<div class="section" id="output">
<h3>6.3.2.1.1.2. Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p>This utility outputs a <a class="reference internal" href="starch-specification.html#starch-specification"><span class="std std-ref">Starch v2-formatted</span></a> archive file.</p>
</div>
</div>
<div class="section" id="requirements">
<span id="starch-example"></span><h2>6.3.2.1.2. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> tool requires data in a relaxed variation of the BED format as described by <a class="reference external" href="http://genome.ucsc.edu/FAQ/FAQformat.html#format1">UCSC’s browser documentation</a>. BED data should be sorted before compression, <em>i.e.</em> with BEDOPS <a class="reference internal" href="../sorting/sort-bed.html#sort-bed"><span class="std std-ref">sort-bed</span></a>.</p>
<p>At a minimum, three columns are required to specify the chromosome name and start and stop positions. Additional columns may be specified, containing up to 128 kB of data per row (including tab delimiters).</p>
</div>
<div class="section" id="usage">
<h2>6.3.2.1.3. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option to list all options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">starch</span>
 <span class="n">citation</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bioinformatics</span><span class="o">.</span><span class="n">oxfordjournals</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="mi">28</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="mf">1919.</span><span class="n">abstract</span>
 <span class="n">binary</span> <span class="n">version</span><span class="p">:</span> <span class="mf">2.4</span><span class="o">.</span><span class="mi">36</span> <span class="p">(</span><span class="n">typical</span><span class="p">)</span> <span class="p">(</span><span class="n">creates</span> <span class="n">archive</span> <span class="n">version</span><span class="p">:</span> <span class="mf">2.2</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
 <span class="n">authors</span><span class="p">:</span>  <span class="n">Alex</span> <span class="n">Reynolds</span> <span class="ow">and</span> <span class="n">Shane</span> <span class="n">Neph</span>

<span class="n">USAGE</span><span class="p">:</span> <span class="n">starch</span> <span class="p">[</span> <span class="o">--</span><span class="n">note</span><span class="o">=</span><span class="s2">&quot;foo bar...&quot;</span> <span class="p">]</span>
              <span class="p">[</span> <span class="o">--</span><span class="n">bzip2</span> <span class="o">|</span> <span class="o">--</span><span class="n">gzip</span> <span class="p">]</span>
              <span class="p">[</span> <span class="o">--</span><span class="n">omit</span><span class="o">-</span><span class="n">signature</span> <span class="p">]</span>
              <span class="p">[</span> <span class="o">--</span><span class="n">report</span><span class="o">-</span><span class="n">progress</span><span class="o">=</span><span class="n">N</span> <span class="p">]</span>
              <span class="p">[</span> <span class="o">--</span><span class="n">header</span> <span class="p">]</span> <span class="p">[</span> <span class="o">&lt;</span><span class="n">unique</span><span class="o">-</span><span class="n">tag</span><span class="o">&gt;</span> <span class="p">]</span> <span class="o">&lt;</span><span class="n">bed</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>

    <span class="o">*</span> <span class="n">BED</span> <span class="nb">input</span> <span class="n">must</span> <span class="n">be</span> <span class="nb">sorted</span> <span class="n">lexicographically</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">using</span> <span class="n">BEDOPS</span> <span class="n">sort</span><span class="o">-</span><span class="n">bed</span><span class="p">)</span><span class="o">.</span>
    <span class="o">*</span> <span class="n">Please</span> <span class="n">use</span> <span class="s1">&#39;-&#39;</span> <span class="n">to</span> <span class="n">indicate</span> <span class="n">reading</span> <span class="n">BED</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">standard</span> <span class="nb">input</span><span class="o">.</span>
    <span class="o">*</span> <span class="n">Output</span> <span class="n">must</span> <span class="n">be</span> <span class="n">directed</span> <span class="n">to</span> <span class="n">a</span> <span class="n">regular</span> <span class="n">file</span><span class="o">.</span>
    <span class="o">*</span> <span class="n">The</span> <span class="n">bzip2</span> <span class="n">compression</span> <span class="nb">type</span> <span class="n">makes</span> <span class="n">smaller</span> <span class="n">archives</span><span class="p">,</span> <span class="k">while</span> <span class="n">gzip</span> <span class="n">extracts</span>
      <span class="n">faster</span><span class="o">.</span>

    <span class="n">Process</span> <span class="n">Flags</span>
    <span class="o">--------------------------------------------------------------------------</span>
    <span class="o">--</span><span class="n">note</span><span class="o">=</span><span class="s2">&quot;foo bar...&quot;</span>   <span class="n">Append</span> <span class="n">note</span> <span class="n">to</span> <span class="n">output</span> <span class="n">archive</span> <span class="n">metadata</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="o">.</span>

    <span class="o">--</span><span class="n">bzip2</span> <span class="o">|</span> <span class="o">--</span><span class="n">gzip</span>      <span class="n">Specify</span> <span class="n">backend</span> <span class="n">compression</span> <span class="nb">type</span> <span class="p">(</span><span class="n">optional</span><span class="p">,</span> <span class="n">default</span>
                          <span class="ow">is</span> <span class="n">bzip2</span><span class="p">)</span><span class="o">.</span>

    <span class="o">--</span><span class="n">omit</span><span class="o">-</span><span class="n">signature</span>      <span class="n">Skip</span> <span class="n">generating</span> <span class="n">per</span><span class="o">-</span><span class="n">chromosome</span> <span class="n">data</span> <span class="n">integrity</span> <span class="n">signature</span>
                          <span class="p">(</span><span class="n">optional</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">signature</span><span class="p">)</span><span class="o">.</span>

    <span class="o">--</span><span class="n">report</span><span class="o">-</span><span class="n">progress</span><span class="o">=</span><span class="n">N</span>   <span class="n">Report</span> <span class="n">compression</span> <span class="n">progress</span> <span class="n">every</span> <span class="n">N</span> <span class="n">elements</span> <span class="n">per</span>
                          <span class="n">chromosome</span> <span class="n">to</span> <span class="n">standard</span> <span class="n">error</span> <span class="n">stream</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span>

    <span class="o">--</span><span class="n">header</span>              <span class="n">Support</span> <span class="n">BED</span> <span class="nb">input</span> <span class="k">with</span> <span class="n">custom</span> <span class="n">UCSC</span> <span class="n">track</span><span class="p">,</span> <span class="n">SAM</span> <span class="ow">or</span> <span class="n">VCF</span>
                          <span class="n">headers</span><span class="p">,</span> <span class="ow">or</span> <span class="n">generic</span> <span class="n">comments</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="o">.</span>

    <span class="o">&lt;</span><span class="n">unique</span><span class="o">-</span><span class="n">tag</span><span class="o">&gt;</span>          <span class="n">Optional</span><span class="o">.</span> <span class="n">Specify</span> <span class="n">unique</span> <span class="n">identifier</span> <span class="k">for</span> <span class="n">transformed</span>
                          <span class="n">data</span><span class="o">.</span>

    <span class="o">--</span><span class="n">version</span>             <span class="n">Show</span> <span class="n">binary</span> <span class="n">version</span><span class="o">.</span>

    <span class="o">--</span><span class="n">help</span>                <span class="n">Show</span> <span class="n">this</span> <span class="n">usage</span> <span class="n">message</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h2>6.3.2.1.4. Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="backend-compression-type">
<h3>6.3.2.1.4.1. Backend compression type<a class="headerlink" href="#backend-compression-type" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--bzip2</span></code> or <code class="docutils literal notranslate"><span class="pre">--gzip</span></code> operators to use the <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> or <code class="docutils literal notranslate"><span class="pre">gzip</span></code> compression algorithms on transformed BED data. By default, <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> uses the <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> method.</p>
</div>
<div class="section" id="note">
<h3>6.3.2.1.4.2. Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--note=&quot;xyz...&quot;</span></code> option to add a custom string that describes the archive. This data can be retrieved with <code class="docutils literal notranslate"><span class="pre">unstarch</span> <span class="pre">--note</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Examples of usage might include a description of the experiment associated with the data, a URL to a UCSC Genome Browser session, or a bar code or other unique identifier for internal lab or LIMS use.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The only limitation on the length of a note is the command-line shell’s maximum argument length parameter (as found on most UNIX systems with the command <code class="docutils literal notranslate"><span class="pre">getconf</span> <span class="pre">ARG_MAX</span></code>) minus the length of the non- <code class="docutils literal notranslate"><span class="pre">--note=&quot;...&quot;</span></code> command components. On most desktop systems, this value will be approximately 256 kB.</p>
</div>
</div>
<div class="section" id="per-chromosome-data-integrity-signature">
<h3>6.3.2.1.4.3. Per-chromosome data integrity signature<a class="headerlink" href="#per-chromosome-data-integrity-signature" title="Permalink to this headline">¶</a></h3>
<p>By default, a data integrity signature is generated for each chromosome. This can be used to verify if chromosome streams from two or more Starch archives are identical, or used to test the integrity of a chromosome, to identify potential data corruption.</p>
<p>Generating this signature adds to the computational cost of compression, or an integrity signature may not be useful for all archives. Add the <code class="docutils literal notranslate"><span class="pre">--omit-signature</span></code> option, if the compression time is too high or the data integrity signature is not needed.</p>
</div>
<div class="section" id="compression-progress">
<h3>6.3.2.1.4.4. Compression progress<a class="headerlink" href="#compression-progress" title="Permalink to this headline">¶</a></h3>
<p>To optionally track the progress of compression, use the <code class="docutils literal notranslate"><span class="pre">--report-progress=N</span></code> option, specifying a positive integer <code class="docutils literal notranslate"><span class="pre">N</span></code> to report the compression of the <em>N</em> -th element for the current chromosome. The report is printed to the standard error stream.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For instance, specifying a value of <code class="docutils literal notranslate"><span class="pre">1</span></code> reports the compression of every input element of all chromosomes, while a value of <code class="docutils literal notranslate"><span class="pre">1000</span></code> would report the compression of every 1000th element of the current chromosome.</p>
</div>
</div>
<div class="section" id="headers">
<h3>6.3.2.1.4.5. Headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h3>
<p>Add the <code class="docutils literal notranslate"><span class="pre">--header</span></code> flag if the BED data being compressed contain <a class="reference external" href="http://genome.ucsc.edu/FAQ/FAQformat.html#format1.7">extra header data</a> that are exported from a UCSC Genome Browser session.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the BED data contain custom headers and <code class="docutils literal notranslate"><span class="pre">--header</span></code> is not specified, <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> will be unable to read chromosome data correctly and exit with an error state.</p>
</div>
</div>
<div class="section" id="unique-tag">
<h3>6.3.2.1.4.6. Unique tag<a class="headerlink" href="#unique-tag" title="Permalink to this headline">¶</a></h3>
<p>Adding a <code class="docutils literal notranslate"><span class="pre">&lt;unique-tag&gt;</span></code> string replaces portions of the <cite>filename</cite> key in the archive’s <a class="reference internal" href="starch-specification.html#starch-archive-metadata-stream"><span class="std std-ref">stream metadata</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is largely obsolete and included for legacy support. It is better to use the <code class="docutils literal notranslate"><span class="pre">--note=&quot;xyz...&quot;</span></code> option to add identifiers or other custom data.</p>
</div>
</div>
</div>
<div class="section" id="example">
<h2>6.3.2.1.5. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>To compress unsorted BED data (or data of unknown sort order), we feed <a class="reference internal" href="#starch"><span class="std std-ref">starch</span></a> a <a class="reference internal" href="../sorting/sort-bed.html#sort-bed"><span class="std std-ref">sorted</span></a> stream, using the hyphen (<code class="docutils literal notranslate"><span class="pre">-</span></code>) to specify standard input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sort-bed unsorted.bed | starch - &gt; sorted.starch
</pre></div>
</div>
<p>This creates the file <code class="docutils literal notranslate"><span class="pre">sorted.starch</span></code>, which uses the <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> algorithm to compress transformed BED data from a sorted permutation of data in <code class="docutils literal notranslate"><span class="pre">unsorted.bed</span></code>. No note or custom tag data is added.</p>
<p>It is possible to speed up the compression of a BED file by using a cluster. Start by reviewing our <a class="reference internal" href="../../../usage-examples/starchcluster.html#starchcluster"><span class="std std-ref">starchcluster</span></a> script.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/logo_with_label_v3.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.3.2.1. <cite>starch</cite></a><ul>
<li><a class="reference internal" href="#inputs-and-outputs">6.3.2.1.1. Inputs and outputs</a><ul>
<li><a class="reference internal" href="#input">6.3.2.1.1.1. Input</a></li>
<li><a class="reference internal" href="#output">6.3.2.1.1.2. Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requirements">6.3.2.1.2. Requirements</a></li>
<li><a class="reference internal" href="#usage">6.3.2.1.3. Usage</a></li>
<li><a class="reference internal" href="#options">6.3.2.1.4. Options</a><ul>
<li><a class="reference internal" href="#backend-compression-type">6.3.2.1.4.1. Backend compression type</a></li>
<li><a class="reference internal" href="#note">6.3.2.1.4.2. Note</a></li>
<li><a class="reference internal" href="#per-chromosome-data-integrity-signature">6.3.2.1.4.3. Per-chromosome data integrity signature</a></li>
<li><a class="reference internal" href="#compression-progress">6.3.2.1.4.4. Compression progress</a></li>
<li><a class="reference internal" href="#headers">6.3.2.1.4.5. Headers</a></li>
<li><a class="reference internal" href="#unique-tag">6.3.2.1.4.6. Unique tag</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example">6.3.2.1.5. Example</a></li>
</ul>
</li>
</ul>

<form class="search" action="../../../../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="../compression.html" title="Previous document">6.3.2. Compression</a>
        </li>
        <li>
          <a href="unstarch.html" title="Next document">6.3.2.2. <cite>unstarch</cite></a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../../../index.html">Home</a></li>
      <li>
        <a href="../../../reference.html">6. Reference</a>
      </li>
      <li>
        <a href="../../file-management.html">6.3. File management</a>
      </li>
      <li>
        <a href="../compression.html">6.3.2. Compression</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2011-2019, Shane Neph, Alex Reynolds.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.8.5
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>